<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-checkbox/paper-checkbox.html">
<link rel="import" href="../paper-radio-button/paper-radio-button.html">
<link rel="import" href="../asq-element-common/asq-element-common.html">

<polymer-element name="asq-option">
  <template>
    <style>
    </style>

    <!-- template for viewer -->
    <template if="{{role==Roles.VIEWER}}">
      <div>
        <li>
        <core-label>
          <template  if="{{type=='radio'}}">
            <paper-radio-button id="option" name="{{name}}" ></paper-radio-button>
          </template>
          <template  if="{{type=='checkbox'}}">
            <paper-checkbox id="option" name="{{name}}" ></paper-checkbox>
          </template> 
          <content></content>
        </core-label>
        </li>
      </div>
    </template>

    <!-- template for presenter -->
    <template  if="{{role==Roles.PRESENTER}}">
      <div>
        <li>
          <content></content> 
        </li>
      </div>
    </template> 

    <template  if="{{role==Roles.TA}}">
      <div>
        <li>
          <content></content> 
        </li>
      </div>
    </template>    

  </template>
  <script>
    (function() {

      var p = {
        

        publish: {
          name: '',
          correct: "false",
          type: "checkbox",
          checked: {value: false, reflect: true},
          disabled: {value: false, reflect: true}
        },

        eventDelegates: {
          tap: 'tap'
        },
        
        tap: function() {
          if (this.disabled) {
            return;
          }
          this.checked = ! this.checked;
          this.fire('change');
        },

        checkedChanged: function() {
          tagName = (this.type == "checkbox")
           ? 'paper-checkbox'
           : 'paper-radio-button';
          this.shadowRoot.querySelector(tagName).checked = this.checked;
          this.fire('core-change');
        },

        isCorrect: false,

        created: function  () {
          if ( this.attributes.hasOwnProperty("correct") ) {
            this.isCorrect = this.attributes["correct"];
            // this.removeAttribute("correct");
          } else {
            this.isCorrect = false;
          }

        },

        submit: function() {
          if ( this.role === this.Roles.VIEWER ) {
            // console.log(this, this.role, this.shadowRoot.querySelector("#option").checked);
            return this.$.option.checked;
          }
        },
       
      }

      ASQ.mixin2(p, ASQ.RoleMixin);
      Polymer.mixin(p, ASQ.ElementTypeMixin);
      Polymer('asq-option', p);
    })()
    
  </script>
</polymer-element>